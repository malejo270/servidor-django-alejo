{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="historico-container">

    <!-- BOTONES SUPERIORES ADAPTADOS -->
    <div class="top-buttons d-flex flex-column flex-md-row justify-content-between align-items-start gap-2">

        <!-- Volver (siempre arriba izquierda) -->
        <a href="{% url 'vista_general_recos_ope' %}" class="btn-volver text-center text-md-start">
            ‚Üê Volver
        </a>

        <!-- Reporte de Emergencia (se mueve debajo en m√≥vil) -->
        <a href="{% url 'reporte_emergencia' %}" class="btn-emergencia text-center text-md-end">
            üö® Reporte de Emergencia
        </a>
    </div>

    <!-- T√çTULO PRINCIPAL -->
    <h1 class="historico-titulo">
        Hist√≥rico de Trabajos ‚Äì Comunicaci√≥n: {{ comunicacion.modem }} ({{ comunicacion.ip }})
    </h1>

    <!-- INFO DE NODO Y RECO -->
    <p class="info-nodo-reco">
        <strong>Nodo:</strong> {{ nodo.nodo }} &nbsp;|&nbsp;
        <strong>Reco:</strong> {{ reco.n_equipo }}
    </p>

    <!-- LISTADO DE INFORMES -->
    <div class="informes-container">
        <h3>Informes de trabajo</h3>

        {% if informes %}
            {% for item in informes %}
                <div class="informe-card">
                    <p><strong>Fecha de cierre:</strong> {{ item.hora_cierre|date:"Y-m-d H:i" }}</p>
                    <p><strong>Falla Identificada:</strong> {{ item.falla_identificada|default:"‚Äî" }}</p>
                    <p><strong>Causa de la Falla:</strong> {{ item.causa_falla|default:"‚Äî" }}</p>
                    <p><strong>Trabajo Realizado:</strong> {{ item.trabajo_realizado|default:"‚Äî" }}</p>
                </div>
            {% endfor %}
        {% else %}
            <p class="no-informes">No hay trabajos registrados a√∫n para esta comunicaci√≥n.</p>
        {% endif %}
    </div>

</div>

<link rel="stylesheet" href="{% static 'css/historico_solo_lectura.css' %}">
{% endblock %}
