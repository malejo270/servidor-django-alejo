{% extends 'base.html' %}
{% block content %}
<div style="max-width: 1200px; margin: 40px auto; font-family: Arial, sans-serif;">

    <!-- Botón de volver -->
    <div style="margin-bottom: 20px;">
        <a href="{{ url_origen }}" 
            style="background-color: #6c757d; color: white; padding: 10px 18px; border-radius: 8px; 
          text-decoration: none; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
             ← Volver
        </a>
    </div>

    <h2 style="text-align: center; color: #d00000; margin-bottom: 20px;">Reconectadores y Comunicaciones</h2>

    {% if nodo %}
        <h3 style="background-color: #ffcc00; padding: 10px; border-radius: 5px; text-align:center;">
            Nodo: {{ nodo.nodo }}
        </h3>

        {% if reco %}
            {% if reco.foto %}
            <!-- Foto centrada arriba -->
            <div style="text-align: center; margin: 25px 0;">
                <img src="{{ reco.foto.url }}" alt="Foto del reconectador" 
                     style="max-width: 200px; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.15);">
            </div>
            {% endif %}

            <!-- Información Reco y Comunicación -->
            <div style="display: flex; justify-content: space-between; margin-bottom: 30px; border: 1px solid #ccc; border-radius: 8px; padding: 20px; background: #f9f9f9;">
                
                <!-- Información del Reco -->
                <div style="flex: 1; padding-right: 20px; border-right: 1px solid #ccc;">
                    <h4 style="color: #0056b3;">Reconectador</h4>
                    <p><strong>Activo reco:</strong> {{ reco.activo_reco }}</p>
                    <p><strong>Sn activo :</strong> {{ reco.sn_activo }}</p>
                    <p><strong>Equipo:</strong> {{ reco.n_equipo }}</p>
                    <p><strong>Serial:</strong> {{ reco.serial_reco }}</p>
                    <p><strong>Modelo:</strong> {{ reco.modelo }}</p>
                    <p><strong>Marca:</strong> {{ reco.marca }}</p>
                    <p><strong>Fecha Instalación:</strong> {{ reco.fecha_instalacion }}</p>
                    <p><strong>Responsable:</strong> {{ reco.responsable }}</p>
                    <p><strong>Estado Batería:</strong> {{ reco.estado_bateria }}</p>
                    <p><strong>Serial Batería:</strong> {{ reco.serial_bateria }}</p>
                    <p><strong>Estado Reco:</strong> {{ reco.estado_reconectador }}</p>
                    <p><strong>Icc:</strong> {{ reco.Icc }}</p>
                </div>

                <!-- Información de Comunicación -->
                <div style="flex: 1; padding-left: 20px;">
                    <h4 style="color: #1abc9c;">Comunicación</h4>
                    {% if comunicacion %}
                        <p><strong>Modem:</strong> {{ comunicacion.modem }}</p>
                        <p><strong>Serial Modem:</strong> {{ comunicacion.serial_modem }}</p>
                        <p><strong>Activo modem:</strong> {{ comunicacion.activo_modem }}</p>
                        <p><strong>IP:</strong> {{ comunicacion.ip }}</p>
                        <p><strong>IP Vieja:</strong> {{ comunicacion.ip_vieja|default:"—" }}</p>
                        <p><strong>ASDU:</strong> {{ comunicacion.asdu }}</p>
                        <p><strong>Estado:</strong> {{ comunicacion.estado }}</p>
                        <p><strong>Tecnología:</strong> {{ comunicacion.tecnologia }}</p>
                        <p><strong>Estado Actividad:</strong> {{ comunicacion.estado_actividad|default:"—" }}</p>
                        
                    {% else %}
                        <p style="color: gray;">Sin comunicación asociada.</p>
                    {% endif %}
                </div>
            </div>
        {% else %}
            <p>Este nodo no tiene reconectador.</p>
        {% endif %}
    {% else %}
        <p>No hay nodo seleccionado.</p>
    {% endif %}
</div>
{% endblock %}
