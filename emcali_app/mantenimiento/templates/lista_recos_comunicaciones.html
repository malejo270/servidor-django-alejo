{% extends 'base.html' %}
{% block content %}

<div class="container my-4">

    <!-- Botón de volver -->
    <div class="mb-3">
        <a href="{{ url_origen }}" class="btn btn-secondary fw-bold shadow-sm px-4">
            ← Volver
        </a>
    </div>

    <h2 class="text-center text-danger mb-4">
        Reconectadores y Comunicaciones
    </h2>

    {% if nodo %}
        <h3 class="text-center bg-warning p-2 rounded">
            Nodo: {{ nodo.nodo }}

        </h3 >
        <h4 class="text-center ">Ubicacion:{{nodo.direccion}}</h4>

        {% if reco %}

            {% if reco.foto %}
            <!-- Foto centrada -->
            <div class="text-center my-4">
                <img src="{{ reco.foto.url }}" 
                     class="img-fluid shadow-sm rounded"
                     style="max-width: 220px; border: 1px solid #ccc;">
            </div>
            {% endif %}

            <!-- Card principal -->
            <div class="row g-3 p-3 border rounded bg-light mt-4">

                <!-- RECO -->
                <div class="col-12 col-md-6 border-end">
                    <h4 class="text-primary">Reconectador</h4>

                    <p><strong>Activo reco:</strong> {{ reco.activo_reco }}</p>
                    <p><strong>Sn activo:</strong> {{ reco.sn_activo }}</p>
                    <p><strong>Equipo:</strong> {{ reco.n_equipo }}</p>
                    <p><strong>Serial:</strong> {{ reco.serial_reco }}</p>
                    <p><strong>Modelo:</strong> {{ reco.modelo }}</p>
                    <p><strong>Marca:</strong> {{ reco.marca }}</p>
                    <p><strong>Fecha Instalación:</strong> {{ reco.fecha_instalacion }}</p>
                    <p><strong>Responsable:</strong> {{ reco.responsable }}</p>
                    <p><strong>Estado Batería:</strong> {{ reco.estado_bateria }}</p>
                    <p><strong>Serial Batería:</strong> {{ reco.serial_bateria }}</p>
                    <p><strong>Estado Reco:</strong> {{ reco.estado_reconectador }}</p>
                    <p><strong>Icc:</strong> {{ reco.Icc }}</p>
                </div>

                <!-- COMUNICACIÓN -->
                <div class="col-12 col-md-6">
                    <h4 class="text-success">Comunicación</h4>

                    {% if comunicacion %}
                        <p><strong>Modem:</strong> {{ comunicacion.modem }}</p>
                        <p><strong>Serial Modem:</strong> {{ comunicacion.serial_modem }}</p>
                        <p><strong>Activo modem:</strong> {{ comunicacion.activo_modem }}</p>
                        <p><strong>IP:</strong> {{ comunicacion.ip }}</p>
                        <p><strong>IP Vieja:</strong> {{ comunicacion.ip_vieja|default:"—" }}</p>
                        <p><strong>ASDU:</strong> {{ comunicacion.asdu }}</p>
                        <p><strong>Estado:</strong> {{ comunicacion.estado }}</p>
                        <p><strong>Tecnología:</strong> {{ comunicacion.tecnologia }}</p>
                        <p><strong>Estado Actividad:</strong> {{ comunicacion.estado_actividad|default:"—" }}</p>
                    {% else %}
                        <p class="text-muted">Sin comunicación asociada.</p>
                    {% endif %}
                </div>

            </div>

        {% else %}
            <p>Este nodo no tiene reconectador.</p>
        {% endif %}

    {% else %}
        <p>No hay nodo seleccionado.</p>
    {% endif %}

</div>

{% endblock %}
